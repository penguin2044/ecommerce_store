<% breadcrumb :product, @product %>
<div class="container">
  <div class="product-detail">
    <div class="product-header">
      <%= link_to 'â† Back to Products', root_path, class: 'back-link' %>
      <h1><%= @product.name %></h1>
      <p class="category"><%= @product.category.name %></p>
      
      <% if @product.tags.any? %>
        <div class="product-tags">
          <% @product.tags.each do |tag| %>
            <span class="tag-badge"><%= tag.name %></span>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="product-info">
      <div class="product-description">
        <h2>Description</h2>
        <p><%= @product.description %></p>
      </div>

      <div class="product-purchase">
        <div class="price-box">
          <% if @product.on_sale? %>
            <p class="original-price">$<%= number_with_precision(@product.price, precision: 2) %></p>
            <p class="sale-price">$<%= number_with_precision(@product.sale_price, precision: 2) %></p>
            <p class="savings">Save $<%= number_with_precision(@product.price - @product.sale_price, precision: 2) %>!</p>
          <% else %>
            <p class="price">$<%= number_with_precision(@product.price, precision: 2) %></p>
          <% end %>
        </div>

        <div class="stock-info">
          <% if @product.stock_quantity > 0 %>
            <p class="in-stock">In Stock (<%= @product.stock_quantity %> available)</p>
          <% else %>
            <p class="out-of-stock">Out of Stock</p>
          <% end %>
        </div>

        <% if @product.stock_quantity > 0 %>
          <%= button_to 'Add to Cart', add_to_cart_path(@product), method: :post, class: 'btn btn-add-to-cart' %>
        <% else %>
          <button class="btn btn-disabled" disabled>Out of Stock</button>
        <% end %>
      </div>
    </div>

    <% if @product.featured? %>
      <div class="featured-badge">Featured Product</div>
    <% end %>
  </div>
</div>